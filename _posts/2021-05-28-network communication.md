---
layout: post
title: "[네트워크] 네트워크 통신하기"
subtitle: "유니캐스트, 멀티캐스트, 브로드캐스트, 애니캐스트"
date: 2021-05-28 14:18:00 +0900
background: '/img/posts/cable.jpg'
category: Study
tags: [network]
---
## 3장 네트워크 통신하기
### 3.1 유니캐스트, 멀티캐스트, 브로드캐스트, 애니캐스트
네트워크에서 출발지에서 목적지로 데이터를 전송할 때 사용하는 통신 방식의 종류는 다음과 같습니다.

##### 유니캐스트
* 1:1 통신

##### 브로드캐스트
* 1:전체 통신
* 동일 네트워크에 존재하는 모든 호스트가 목적지

##### 멀티캐스트
* 1:그룹(멀티캐스트 구독 호스트) 통신
* 하나의 출발지에서 다수의 특정 목적지로 데이터 전송

##### 애니캐스트
* 1:1 통신
* 동일 그룹 내의 1개의 호스트를 목적지로 함
* 동일 그룹 중 가장 가까운 호스트에서 응답
* IPv4에서 일부 기능 구현, IPv6은 모두 구현 가능

*****

각 통신 방식에 대해 자세히 알아봅시다.

#### 유니캐스트
출발지와 목적지가 명확히 하나로 정해져 있는 1:1 통신 방식으로 실제로 사용하는 대부분의 통신은 유니캐스트 방식을 사용합니다.

<img class="img-fluid" src="/img/posts/inPost/network-communication-01.png">
<span class="caption text-muted">1:1 통신 방식의 유니캐스트</span>

#### 브로드캐스트
목적지 주소가 모든으로 표기되어 있는 통신 방식으로 유니캐스트로 통신하기 전, 주로 상대방의 정확한 위치를 알기 위해 사용됩니다.

주소 체계에 따라 브로드캐스트를 다양하게 분류할 수 있지만 기본 동작은 **로컬 네트워크 내에서 모든 호스트에 패킷을 전달해야 할 때** 사용합니다.

<img class="img-fluid" src="/img/posts/inPost/network-communication-02.png">
<span class="caption text-muted">1:모든 통신 방식의 브로드캐스트</span>

#### 멀티캐스트
멀티캐스트 그룹 주소를 이용해 해당 **그룹에 속한 다수의 호스트**로 패킷을 전송하기 위한 통신 방식입니다.

> 그룹 내 다수의 특정 호스트로 전송합니다. 그룹 전체란 의미는 아닙니다.

* IPTV와 같은 실시간 방송을 볼 때 이 통신 방식을 사용합니다.
* 사내 방송이나 증권 시세 전송과 같이 단방향으로 다수에게 동시에 같은 내용을 전달해야 할 때 사용합니다.

<img class="img-fluid" src="/img/posts/inPost/network-communication-03.png">
<span class="caption text-muted">1:그룹 통신 방식의 멀티캐스트</span>

#### 애니캐스트
애니캐스트 주소가 같은 호스트들 중에서 가장 가깝거나 효율적으로 서비스할 수 있는 호스트와 통신하는 방식입니다.

* **가장 가까운 게이트웨이**를 찾는 애니캐스트 게이트웨이 기능에 사용합니다.
* 애니캐스트 게이트웨이의 성질을 이용해서 **가장 가까운 DNS 서버를 찾을 때** 사용합니다.

<img class="img-fluid" src="/img/posts/inPost/network-communication-04.png">
<span class="caption text-muted">1:1 통신 방식의 애니캐스트</span>

최종 통신 방식은 1:1로 유니캐스트와 동일하지만 통신할 수 있는 후보자가 서로 다릅니다.

* 유니캐스트는 출발지와 목적지가 모두 한 대씩입니다.
* 애니캐스트는 같은 목적지 주소를 가진 서버가 여러대여서 통신 가능한 다수의 후보군이 있습니다.

*****

현재 주로 사용되는 주소 체계는 IPv4 기반입니다. 일부 모바일 네트워크와 대규모 데이터 센터 위주로 새로운 IPv6 기반 주소 체계가 사용되고 있습니다.

IPv6에서는 브로드캐스트가 존재하지 않고 링크 로컬 멀티캐스트로 대체되어 사용됩니다.

통신 방식을 각각 IPv4, IPv6 별로 비교하여 정리하면 다음과 같습니다.

|타입|통신 대상|범위|IPv4|IPv6|예|
|---|---|---|---|---|
|유니캐스트|1:1|전체 네트워크|O|O|HTTP|
|브로드캐스트|1:전체|서브넷(로컬 네트워크)|O|X|ARP|
|멀티캐스트|1:그룹|정의된 구간|O|O|방송|
|애니캐스트|1:1|전체 네트워크|△|O|6 to 4 DNS|

*****

통신 방식을 구분할 때 중요한 것은 출발지 주소가 아닌 목적지 주소 기준이라는 것입니다.

### BUM 트래픽
BUM이란 다음 세 가지의 트래픽을 의미합니다.

* Broadcast
* Unknown Unicast
* Multicast

B, U, M은 서로 다른 종류의 트래픽이지만 네트워크에서의 동작은 서로 비슷합니다.

##### Unknown Unicast
언노운 유니캐스트란 유니캐스트여서 목적지 주소는 명확히 명시되어 있지만 네트워크에서의 동작은 브로드캐스트와 같을 때를 가리킵니다.

* 유니캐스트이지만 스위치가 목적지에 대한 주소를 학습하지 못한 상황이어서 패킷을 모든 포트로 플러딩(전송)하는데 이런 유니캐스트를 언노운 유니캐스트라 합니다.

물론 유니캐스트이므로 전달받는 모든 단말 NIC에서 도착지 주소를 확인하고 자신이 목적지가 아닌 경우 패킷을 버립니다. 하지만 네트워크 입장에서는 네트워크 상에서 불필요한 BUM 트래픽이 많아지면 네트워크 성능이 저하됩니다.

* 이더넷 환경에서는 ARP 브로트캐스트를 먼저 보낸 후 통신을 시작하므로 BUM 트래픽이 많이 발생하지 않습니다.

*****

### 끝
[IT 엔지니어를 위한 네트워크 입문] 도서를 참조해 공부한 내용입니다.

감사합니다.

<p class = "placeholder">Photographs by Chaelin, Unsplash.</p>